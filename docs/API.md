# ๐ ุชูุซูู API - ุชุทุจูู ุงููุฐูุฑุงุช ุงูููููุฉ

## ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงูููู ูุญุชูู ุนูู ุชูุซูู ุชูุตููู ูุฌููุน ุงููุณุงุฑุงุช (Routes) ูุงููุธุงุฆู ูู ุงูุชุทุจูู.

## ุงููุณุงุฑุงุช (Routes)

### 1. ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ

**ุงููุณุงุฑ**: `/`  
**ุงูุทุฑููุฉ**: `GET`  
**ุงููุตู**: ุนุฑุถ ุฌููุน ุงููุฐูุฑุงุช ูุน ุฅููุงููุฉ ุงูุชุตููุฉ

**ุงููุนุงููุงุช (Query Parameters)**:
- `filter` (ุงุฎุชูุงุฑู): ููุน ุงูุชุตููุฉ
  - `all`: ุฌููุน ุงููุฐูุฑุงุช (ุงูุชุฑุงุถู)
  - `today`: ูุฐูุฑุงุช ุงูููู ููุท
  - `month`: ูุฐูุฑุงุช ุดูุฑ ูุนูู
- `value` (ุงุฎุชูุงุฑู): ูููุฉ ุงูุชุตููุฉ (ูุทููุจ ุนูุฏ `filter=month`)
  - ุงูุชูุณูู: `YYYY-MM` (ูุซุงู: `2024-01`)

**ูุซุงู ุงูุงุณุชุฎุฏุงู**:
```
GET /                          # ุฌููุน ุงููุฐูุฑุงุช
GET /?filter=today            # ูุฐูุฑุงุช ุงูููู
GET /?filter=month&value=2024-01  # ูุฐูุฑุงุช ููุงูุฑ 2024
```

**ุงูุงุณุชุฌุงุจุฉ**: ุตูุญุฉ HTML ุชุนุฑุถ ูุงุฆูุฉ ุงููุฐูุฑุงุช

---

### 2. ุฅุถุงูุฉ ูุฐูุฑุฉ ุฌุฏูุฏุฉ

**ุงููุณุงุฑ**: `/add`  
**ุงูุทุฑููุฉ**: `GET`, `POST`  
**ุงููุตู**: ุนุฑุถ ูููุฐุฌ ุฅุถุงูุฉ ูุฐูุฑุฉ ุฃู ุญูุธ ูุฐูุฑุฉ ุฌุฏูุฏุฉ

#### GET `/add`
ุนุฑุถ ูููุฐุฌ ุฅุถุงูุฉ ูุฐูุฑุฉ ุฌุฏูุฏุฉ

**ุงูุงุณุชุฌุงุจุฉ**: ุตูุญุฉ HTML ูุน ูููุฐุฌ ุงูุฅุฏุฎุงู

#### POST `/add`
ุญูุธ ูุฐูุฑุฉ ุฌุฏูุฏุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

**ุจูุงูุงุช ุงููููุฐุฌ (Form Data)**:
- `content` (ูุทููุจ): ูุญุชูู ุงููุฐูุฑุฉ (ูุต)

**ูุซุงู**:
```html
<form method="POST" action="/add">
    <textarea name="content">ูุญุชูู ุงููุฐูุฑุฉ ููุง</textarea>
    <button type="submit">ุญูุธ</button>
</form>
```

**ุงูุงุณุชุฌุงุจุฉ**: 
- ูุฌุงุญ: ุฅุนุงุฏุฉ ุชูุฌูู ุฅูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ูุน ุฑุณุงูุฉ ูุฌุงุญ
- ูุดู: ุฅุนุงุฏุฉ ุนุฑุถ ุงููููุฐุฌ ูุน ุฑุณุงูุฉ ุฎุทุฃ

---

### 3. ุนุฑุถ ูุฐูุฑุฉ ูุงุญุฏุฉ

**ุงููุณุงุฑ**: `/entry/<int:entry_id>`  
**ุงูุทุฑููุฉ**: `GET`  
**ุงููุตู**: ุนุฑุถ ูุฐูุฑุฉ ูุงุญุฏุฉ ุจุงูุชูุตูู ุงููุงูู

**ุงููุนุงููุงุช**:
- `entry_id` (ูุทููุจ): ูุนุฑู ุงููุฐูุฑุฉ (ุนุฏุฏ ุตุญูุญ)

**ูุซุงู ุงูุงุณุชุฎุฏุงู**:
```
GET /entry/1    # ุนุฑุถ ุงููุฐูุฑุฉ ุฑูู 1
GET /entry/5    # ุนุฑุถ ุงููุฐูุฑุฉ ุฑูู 5
```

**ุงูุงุณุชุฌุงุจุฉ**: 
- ูุฌุงุญ: ุตูุญุฉ HTML ุชุนุฑุถ ุชูุงุตูู ุงููุฐูุฑุฉ
- ูุดู: ุตูุญุฉ 404 ุฅุฐุง ูู ุชูุฌุฏ ุงููุฐูุฑุฉ

---

### 4. ุญุฐู ูุฐูุฑุฉ

**ุงููุณุงุฑ**: `/delete/<int:entry_id>`  
**ุงูุทุฑููุฉ**: `POST`  
**ุงููุตู**: ุญุฐู ูุฐูุฑุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

**ุงููุนุงููุงุช**:
- `entry_id` (ูุทููุจ): ูุนุฑู ุงููุฐูุฑุฉ ุงููุฑุงุฏ ุญุฐููุง

**ูุซุงู ุงูุงุณุชุฎุฏุงู**:
```html
<form method="POST" action="/delete/1">
    <button type="submit">ุญุฐู</button>
</form>
```

**ุงูุงุณุชุฌุงุจุฉ**: ุฅุนุงุฏุฉ ุชูุฌูู ุฅูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ูุน ุฑุณุงูุฉ ูุฌุงุญ

---

## ุงูููุงุฐุฌ (Models)

### DiaryEntry

ูููุฐุฌ ุฌุฏูู ุงููุฐูุฑุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

**ุงูุญููู**:
- `id` (Integer, Primary Key): ุงููุนุฑู ุงููุฑูุฏ
- `content` (Text, Required): ูุญุชูู ุงููุฐูุฑุฉ
- `created_at` (DateTime, Required): ุชุงุฑูุฎ ูููุช ุงูุฅูุดุงุก

**ูุซุงู ุงูุงุณุชุฎุฏุงู ูู Python**:
```python
from app import db, DiaryEntry
from datetime import datetime

# ุฅูุดุงุก ูุฐูุฑุฉ ุฌุฏูุฏุฉ
entry = DiaryEntry(
    content="ูุฐู ูุฐูุฑุชู ุงูุฃููู",
    created_at=datetime.now()
)
db.session.add(entry)
db.session.commit()

# ูุฑุงุกุฉ ูุฐูุฑุฉ
entry = DiaryEntry.query.get(1)

# ุญุฐู ูุฐูุฑุฉ
db.session.delete(entry)
db.session.commit()
```

---

## ุงูููุงุชุฑ ุงููุฎุตุตุฉ (Custom Filters)

### nl2br

ููุชุฑ Jinja2 ูุชุญููู ุงูุฃุณุทุฑ ุงูุฌุฏูุฏุฉ (`\n`) ุฅูู ุนูุงูุงุช `<br>` ูู HTML

**ุงูุงุณุชุฎุฏุงู ูู ุงูููุงูุจ**:
```jinja2
{{ entry.content|nl2br|safe }}
```

**ูุซุงู**:
```python
# ุงููุต ุงูุฃุตูู
text = "ุงูุณุทุฑ ุงูุฃูู\nุงูุณุทุฑ ุงูุซุงูู"

# ุจุนุฏ ุชุทุจูู ุงูููุชุฑ
# ุงูุณุทุฑ ุงูุฃูู<br>ุงูุณุทุฑ ุงูุซุงูู
```

---

## ุฑุณุงุฆู Flash

ุงูุชุทุจูู ูุณุชุฎุฏู ูุธุงู Flash Messages ูุนุฑุถ ุงูุฑุณุงุฆู ูููุณุชุฎุฏู:

**ุฃููุงุน ุงูุฑุณุงุฆู**:
- `success`: ุฑุณุงุฆู ุงููุฌุงุญ (ููู ุฃุฎุถุฑ)
- `error`: ุฑุณุงุฆู ุงูุฎุทุฃ (ููู ุฃุญูุฑ)

**ูุซุงู ูู ุงูููุฏ**:
```python
flash('ุชู ุญูุธ ุงููุฐูุฑุฉ ุจูุฌุงุญ!', 'success')
flash('ูุฑุฌู ุฅุฏุฎุงู ูุญุชูู ุงููุฐูุฑุฉ', 'error')
```

**ุนุฑุถ ุงูุฑุณุงุฆู ูู ุงูููุงูุจ**:
```jinja2
{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        {% for category, message in messages %}
            <div class="alert alert-{{ category }}">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}
{% endwith %}
```

---

## ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### ุงุณุชุฎุฏุงู Python Requests

```python
import requests

# ุฅุถุงูุฉ ูุฐูุฑุฉ ุฌุฏูุฏุฉ
response = requests.post('http://127.0.0.1:5000/add', data={
    'content': 'ูุญุชูู ุงููุฐูุฑุฉ'
})

# ุงูุญุตูู ุนูู ุฌููุน ุงููุฐูุฑุงุช
response = requests.get('http://127.0.0.1:5000/')

# ุงูุญุตูู ุนูู ูุฐูุฑุงุช ุงูููู
response = requests.get('http://127.0.0.1:5000/?filter=today')

# ุนุฑุถ ูุฐูุฑุฉ ูุงุญุฏุฉ
response = requests.get('http://127.0.0.1:5000/entry/1')

# ุญุฐู ูุฐูุฑุฉ
response = requests.post('http://127.0.0.1:5000/delete/1')
```

### ุงุณุชุฎุฏุงู cURL

```bash
# ุฅุถุงูุฉ ูุฐูุฑุฉ ุฌุฏูุฏุฉ
curl -X POST http://127.0.0.1:5000/add \
  -d "content=ูุญุชูู ุงููุฐูุฑุฉ"

# ุงูุญุตูู ุนูู ุฌููุน ุงููุฐูุฑุงุช
curl http://127.0.0.1:5000/

# ุงูุญุตูู ุนูู ูุฐูุฑุงุช ุงูููู
curl "http://127.0.0.1:5000/?filter=today"

# ุนุฑุถ ูุฐูุฑุฉ ูุงุญุฏุฉ
curl http://127.0.0.1:5000/entry/1
```

---

## ุฑููุฒ ุงูุญุงูุฉ (Status Codes)

- `200 OK`: ุงูุทูุจ ูุฌุญ
- `302 Found`: ุฅุนุงุฏุฉ ุชูุฌูู (Redirect)
- `404 Not Found`: ุงูุตูุญุฉ ุฃู ุงูููุฑุฏ ุบูุฑ ููุฌูุฏ
- `405 Method Not Allowed`: ุทุฑููุฉ HTTP ุบูุฑ ูุณููุญุฉ
- `500 Internal Server Error`: ุฎุทุฃ ูู ุงูุฎุงุฏู

---

## ููุงุญุธุงุช ูููุฉ

1. **ุงูุฃูุงู**: ุฌููุน ุงููุณุงุฑุงุช ููุชูุญุฉ ุญุงููุงู. ูู ุจูุฆุฉ ุงูุฅูุชุงุฌุ ูุฌุจ ุฅุถุงูุฉ ูุธุงู ูุตุงุฏูุฉ.

2. **CSRF Protection**: ุงูุชุทุจูู ูุง ูุญุชูู ุนูู ุญูุงูุฉ CSRF ุญุงููุงู. ูููุตุญ ุจุฅุถุงูุชูุง ููุฅูุชุงุฌ.

3. **ุงูุชุญูู ูู ุงูุจูุงูุงุช**: ูุชู ุงูุชุญูู ูู ูุฌูุฏ ูุญุชูู ุงููุฐูุฑุฉ ูุจู ุงูุญูุธ.

4. **ูุงุนุฏุฉ ุงูุจูุงูุงุช**: ูุชู ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชููุงุฆูุงู ุนูุฏ ุฃูู ุชุดุบูู.

---

**ุขุฎุฑ ุชุญุฏูุซ**: 2024

